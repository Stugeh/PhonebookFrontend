(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(41)},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(16),u=t.n(c),o=t(6),s=t(4),l=t(2),i=t.n(l),m=t(3),f=t(5),d=t.n(f),p="api/persons",b=function(){var e=Object(m.a)(i.a.mark((function e(){var n,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(p);case 2:return n=e.sent,t=n,e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(m.a)(i.a.mark((function e(n){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.a.post(p,n),e.next=3,t;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(i.a.mark((function e(n,t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("updating :>> ",n,t),e.next=3,d.a.put("".concat(p,"/").concat(n),t).catch((function(e){return console.log("error",e)}));case 3:return a=b(),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleting ".concat(p,"/").concat(n)),e.next=3,d.a.delete("".concat(p,"/").concat(n));case 3:return e.abrupt("return",b());case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w={getPeople:b,create:h,update:v,deletePerson:g},E=function(){var e=Object(m.a)(i.a.mark((function e(n,t,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete ".concat(n.name))){e.next=9;break}return a("deleted ".concat(n.name)),setTimeout((function(){a(null)}),3e3),e.next=6,w.deletePerson(n.id);case 6:r=e.sent,console.log(r),t(r);case 9:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),j=function(e){var n=e.person,t=e.setPersons,a=e.setMessage;return r.a.createElement("div",null,n.name+" ",n.number+" ",r.a.createElement("button",{onClick:function(){return E(n,t,a)}},"delete"))},O=function(e){var n=e.newName,t=e.newNumber,a=e.handleName,c=e.handleNumber,u=e.addPerson;return r.a.createElement("form",{onSubmit:u},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:a})," "),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:t,onChange:c})," "),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},k=function(e){var n=e.newSearch,t=e.handleSearch;return r.a.createElement("div",null,"Search: ",r.a.createElement("input",{value:n,onChange:t}))},x=function(e){var n=e.filteredList,t=e.setPersons,a=e.setMessage;return n.map((function(e){return r.a.createElement(j,{key:e.name,person:e,setPersons:t,setMessage:a})}))},y=function(e){var n=e.message,t=e.errorMsg;return null!==n?r.a.createElement("div",{className:"message"},n):null!==t?r.a.createElement("div",{className:"error"},t):null},P=function(){var e=Object(a.useState)(""),n=Object(s.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),l=Object(s.a)(u,2),i=l[0],m=l[1],f=Object(a.useState)(""),d=Object(s.a)(f,2),p=d[0],b=d[1],h=Object(a.useState)([]),v=Object(s.a)(h,2),g=v[0],E=v[1],j=Object(a.useState)(null),P=Object(s.a)(j,2),S=P[0],N=P[1],C=Object(a.useState)(null),M=Object(s.a)(C,2),T=M[0],L=M[1];Object(a.useEffect)((function(){w.getPeople().then((function(e){return E(e)}))}),[]);var A=function(e,n){return""===n?e:e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))}(g,p);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(y,{message:S,errorMsg:T}),r.a.createElement(k,{newSearch:p,handleSearch:function(e){b(e.target.value)}}),r.a.createElement("h2",null,"Add new"),r.a.createElement(O,{newName:t,newNumber:i,handleName:function(e){c(e.target.value)},handleNumber:function(e){m(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:t,number:i};if(g.some((function(e){return e.name===n.name}))){if(window.confirm("".concat(n.name," is already in the phonebook. Would you like to update the number?"))){var a=g.filter((function(e){return e.name===n.name}));w.update(a[0].id,Object(o.a)(Object(o.a)({},n),{},{number:i})).then((function(e){c(""),m(""),E(e),N("updated ".concat(n.name)),setTimeout((function(){N(null)}),3e3)})).catch((function(e){console.log(e),L("".concat(n.name," has already been removed from the server.")),setTimeout((function(){L(null)}),5e3)}))}}else w.create(n).then((function(e){E(g.concat(e)),c(""),m(""),N("added ".concat(e.name)),setTimeout((function(){N(null)}),3e3),console.log("returnedPerson",e)})).catch((function(e){console.log(e.response.data),L(e.response.data.error),setTimeout((function(){L(null)}),5e3)}))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(x,{filteredList:A,setPersons:E,setMessage:N}))};t(40);u.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.3af05cd0.chunk.js.map