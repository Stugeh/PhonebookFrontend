{"version":3,"sources":["services/people.js","Renderers.js","App.js","index.js"],"names":["baseUrl","getPeople","a","axios","get","request","response","data","create","newPerson","post","update","id","console","log","put","catch","error","newList","deletePerson","delete","Remove","person","setPersons","setMessage","window","confirm","name","setTimeout","people","Person","number","onClick","newName","newNumber","handleName","handleNumber","addPerson","onSubmit","value","onChange","type","newSearch","handleSearch","filteredList","map","key","Notification","message","errorMsg","className","App","useState","setNewName","setNewNumber","setNewSearch","persons","setErrorMsg","useEffect","then","initPeople","filter","toLowerCase","includes","FilterPeople","Renderers","event","target","preventDefault","some","e","newPersons","personObject","returnedPersons","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3af05cd0.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = 'api/persons'\r\n\r\n// fetches phonebook from the server.\r\nconst getPeople = async () => {\r\n    const request = await axios.get(baseUrl)\r\n    const response = request\r\n    return await response.data\r\n}\r\n\r\n// Posts a new person on the server.\r\nconst create = async (newPerson) => {\r\n    const request = axios.post(baseUrl, newPerson)\r\n    const response = await request\r\n    return response.data\r\n}\r\n\r\n// updates existing entry.\r\nconst update = async (id, newPerson) => {\r\n    console.log('updating :>> ', id, newPerson)\r\n    await axios.put(`${baseUrl}/${id}`, newPerson)\r\n        .catch(error => console.log('error', error))\r\n    const newList = getPeople()\r\n    return newList\r\n}\r\n\r\n// deletes a person.\r\nconst deletePerson = async (id) => {\r\n    console.log(`deleting ${baseUrl}/${id}`)\r\n    await axios.delete(`${baseUrl}/${id}`)\r\n    return getPeople()\r\n}\r\n\r\nexport default { getPeople, create, update, deletePerson }\r\n\r\n","import React from 'react'\r\nimport people from './services/people'\r\n\r\n// event handler for the delete button.\r\nconst Remove = async (person, setPersons, setMessage) => {\r\n    const result = window.confirm(`Are you sure you want to delete ${person.name}`)\r\n    if (result) {\r\n        setMessage(`deleted ${person.name}`)\r\n        setTimeout(() => {\r\n            setMessage(null)\r\n        }, 3000)\r\n        const newList = await people.deletePerson(person.id)\r\n        console.log(newList)\r\n        setPersons(newList)\r\n\r\n    }\r\n\r\n}\r\n\r\n// Renders a person.\r\nconst Person = ({ person, setPersons, setMessage }) =>\r\n    <div>\r\n        {person.name + ' '}\r\n        {person.number + ' '}\r\n        <button onClick={() => Remove(person, setPersons, setMessage)}>\r\n            delete\r\n        </button>\r\n    </div>\r\n\r\n\r\n// Renders the form that allows adding numbers.\r\nconst AddForm = ({ newName, newNumber, handleName, handleNumber, addPerson }) =>\r\n    <form onSubmit={addPerson}>\r\n        <div>name: <input value={newName} onChange={handleName} /> </div>\r\n        <div>number: <input value={newNumber} onChange={handleNumber} /> </div>\r\n        <div><button type=\"submit\">add</button></div>\r\n    </form>\r\n\r\n\r\n// Renders search box.\r\nconst Search = ({ newSearch, handleSearch }) =>\r\n    <div>Search: <input value={newSearch} onChange={handleSearch} /></div>\r\n\r\n\r\n// Recursively calls Person to render every person in the phonebook.    \r\nconst RenderNumbers = ({ filteredList, setPersons, setMessage }) => {\r\n    //console.log(filteredList)\r\n    return (\r\n        filteredList.map(person =>\r\n            <Person key={person.name} person={person} setPersons={setPersons} setMessage={setMessage} />\r\n        )\r\n    )\r\n}\r\n\r\nexport default { Person, AddForm, Search, RenderNumbers } ","import React, { useState, useEffect } from 'react'\r\nimport Renderers from './Renderers'\r\nimport people from './services/people'\r\n\r\n// filters list when using the search box.\r\nconst FilterPeople = (persons, newSearch) => {\r\n  const filteredList = newSearch === '' ?\r\n    persons\r\n    :\r\n    persons.filter(person => person.name.toLowerCase().includes(newSearch.toLowerCase()))\r\n  return filteredList\r\n}\r\n\r\n// error and success notifications when modifying the phonebook.\r\nconst Notification = ({ message, errorMsg }) => {\r\n  if (message !== null) {\r\n    return (\r\n      <div className=\"message\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n  if (errorMsg !== null) {\r\n    return (\r\n      <div className=\"error\">\r\n        {errorMsg}\r\n      </div>\r\n    )\r\n  } else { return (null) }\r\n}\r\n\r\n\r\nconst App = () => {\r\n  // variables that require updating\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [newSearch, setNewSearch] = useState('')\r\n  const [persons, setPersons] = useState([])\r\n  const [message, setMessage] = useState(null)\r\n  const [errorMsg, setErrorMsg] = useState(null)\r\n\r\n  // calls for getPeople to fetch the phonebook the server and assings it.\r\n  const hook = () => {\r\n    people.getPeople().then(initPeople => setPersons(initPeople))\r\n  }\r\n  useEffect(hook, [])\r\n\r\n  // adds a person to the phonebook, resets the input boxes and calls for a notification.\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const person = { name: newName, number: newNumber }\r\n    if (!persons.some(e => e.name === person.name)) {\r\n      people\r\n        .create(person)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setMessage(`added ${returnedPerson.name}`)\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 3000)\r\n          console.log('returnedPerson', returnedPerson)\r\n        })\r\n        .catch(error => {\r\n          // given data doesnt match the backends validation requirements\r\n          console.log(error.response.data)\r\n          setErrorMsg(error.response.data.error)\r\n          setTimeout(() => {\r\n            setErrorMsg(null)\r\n          }, 5000)\r\n        })\r\n    } else {\r\n      // If the name exists on the server the user is asked if they want to update the number.\r\n      const result = window.confirm(`${person.name} is already in the phonebook. Would you like to update the number?`)\r\n      if (result) {\r\n        const newPersons = persons.filter(personObject => personObject.name === person.name)\r\n        people\r\n          .update(newPersons[0].id, { ...person, number: newNumber })\r\n          .then(returnedPersons => {\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setPersons(returnedPersons)\r\n            setMessage(`updated ${person.name}`)\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 3000)\r\n          }).catch(error => {\r\n            console.log(error)\r\n            setErrorMsg(`${person.name} has already been removed from the server.`)\r\n            setTimeout(() => {\r\n              setErrorMsg(null)\r\n            }, 5000)\r\n          })\r\n      }\r\n    }\r\n  }\r\n\r\n  // handlers \r\n  const handleName = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumber = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n  const handleSearch = (event) => {\r\n    setNewSearch(event.target.value)\r\n  }\r\n\r\n  // assigns the list of users that fit the search into a variable.\r\n  const filteredList = FilterPeople(persons, newSearch)\r\n\r\n  // Calls renderers to render the page.\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} errorMsg={errorMsg} />\r\n      <Renderers.Search newSearch={newSearch} handleSearch={handleSearch} />\r\n      <h2>Add new</h2>\r\n      <Renderers.AddForm newName={newName} newNumber={newNumber} handleName={handleName}\r\n        handleNumber={handleNumber} addPerson={addPerson} />\r\n      <h2>Numbers</h2>\r\n      <Renderers.RenderNumbers filteredList={filteredList} setPersons={setPersons} setMessage={setMessage} />\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}